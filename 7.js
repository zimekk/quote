"use strict";(self.webpackChunk_dev_web=self.webpackChunk_dev_web||[]).push([[7],{3007:(e,t,a)=>{a.r(t),a.d(t,{default:()=>$});var n=a(2784),r=a(1148),s=a(859),o=a(3457),l=a(6005),c=a(357),i=a(8205),m=a(2899),u=a(5484),d=a(5556),A=a(3131),p=a(2655),h=a(6309),b=a(1573),f=a(3618),y=a(1498),E=a(918),g=a(6062),x=a.n(g),C=a(4036),w=a.n(C),v=a(6793),M=a.n(v),k=a(7892),D=a.n(k),O=a(1173),S=a.n(O),Z=a(2464),j=a.n(Z),T=a(3510),F={};F.styleTagTransform=j(),F.setAttributes=D(),F.insert=M().bind(null,"head"),F.domAPI=w(),F.insertStyleElement=S(),x()(T.Z,F);const I=T.Z&&T.Z.locals?T.Z.locals:void 0,L=E[16];function R({data:e}){const{labels:t,values:a}=e,[{left:r,right:s,refAreaLeft:o,refAreaRight:l,top:c,bottom:E},g]=(0,n.useState)((()=>({left:"dataMin",right:"dataMax",refAreaLeft:"",refAreaRight:"",top:"dataMax+1",bottom:"dataMin-1",animation:!0}))),x=(0,n.useCallback)((()=>{if(o===l||""===l)return void g((e=>({...e,refAreaLeft:"",refAreaRight:""})));const[e,t]=o>l?[l,o]:[o,l];g((a=>({...a,refAreaLeft:"",refAreaRight:"",left:e,right:t})))}),[o,l]),C=(0,n.useCallback)((()=>{g((e=>({...e,refAreaLeft:"",refAreaRight:"",left:"dataMin",right:"dataMax",top:"dataMax+1",bottom:"dataMin"})))}),[]);return n.createElement("div",{className:I.Chart,style:{userSelect:"none",width:"100%"}},n.createElement("button",{className:I.Button,type:"button",onClick:C},"Zoom Out"),n.createElement(i.h,{width:"100%",height:400},n.createElement(m.w,{width:800,height:400,data:a,onMouseDown:e=>g((t=>({...t,refAreaLeft:e.activeLabel}))),onMouseMove:e=>o&&g((t=>({...t,refAreaRight:e.activeLabel}))),onMouseUp:x},n.createElement(u.q,{strokeDasharray:"3 3"}),n.createElement(d.K,{allowDataOverflow:!0,dataKey:"x",domain:[r,s],type:"number",tickFormatter:e=>(0,y.Z)(e,"yyyy-MM-dd")}),1===t.length&&t.map((e=>n.createElement(A.B,{key:e,allowDataOverflow:!0,domain:[E,c],type:"number",yAxisId:e}))),n.createElement(p.u,{labelFormatter:e=>(0,y.Z)(e,"yyyy-MM-dd"),formatter:(e,t)=>[`${t}: ${e}`]}),n.createElement(h.D,null),t.map(((e,t)=>n.createElement(b.x,{key:e,yAxisId:e,type:"natural",dataKey:e,stroke:L[t],animationDuration:300}))),o&&l?n.createElement(f.z,{yAxisId:"1",x1:o,x2:l,strokeOpacity:.3}):null)))}var U=a(3045),B={};B.styleTagTransform=j(),B.setAttributes=D(),B.insert=M().bind(null,"head"),B.domAPI=w(),B.insertStyleElement=S(),x()(U.Z,B);const _=U.Z&&U.Z.locals?U.Z.locals:void 0,H=(0,c.k)((async()=>{const e=await fetch("api/quote.json");return await e.json()})),N=864e5,J=e=>{const t=Object.entries(e).reduce(((e,[t,a])=>a.map((({price_timestamp:e,price:t})=>({x:Math.round(new Date(e).getTime()/N)*N,y:Number(t)}))).reduce(((e,{x:a,y:n})=>Object.assign(e,{[a]:Object.assign({[t]:n},e[a])})),e)),{});return{labels:Object.keys(e),values:Object.entries(t).sort((([e],[t])=>e-t)).map((([e,t])=>({x:Number(e),...t})))}};function Q({symbol:e,rates:t}){const[{logo_url:a}]=t;return n.createElement("div",null,n.createElement("h3",null,a&&n.createElement("img",{alt:e,src:a}),n.createElement("span",null,e)),n.createElement(R,{data:J({[e]:t.map((({price:e,price_timestamp:t})=>({price_timestamp:t,price:e})))})}))}function $(){const{results:e}=H.read(),[t,a]=(0,n.useState)((()=>e)),c=(0,n.useMemo)((()=>new r.x),[]);(0,n.useEffect)((()=>{const e=c.pipe((0,o.z)((()=>(0,s.D)(fetch("api/rates.json").then((e=>e.json())).then((({data:e})=>{const t=e.reduce(((e,{rates:t,token:a})=>{return Object.assign(e,{[a]:(n=(new Date).toISOString(),r=`${a}USDT`,{id:`${r}@${n}`,price:t.USDT,price_timestamp:n,symbol:r})});var n,r}),{});a((e=>e.concat(t.ATOM)))}))))),(0,l.b)(15e3)).subscribe((e=>c.next({})));return()=>e.unsubscribe()}),[c]),(0,n.useEffect)((()=>{c.next({})}),[]);const i=(0,n.useMemo)((()=>t.reduce(((e,t)=>Object.assign(e,{[t.symbol]:(e[t.symbol]||[]).concat(t)})),{})),[t]);return console.log({list:i}),n.createElement("section",{className:_.Section},n.createElement("h2",null,"Quote"),n.createElement(R,{data:J(i)}),Object.entries(i).map((([e,t])=>n.createElement(Q,{key:e,symbol:e,rates:t}))),n.createElement("pre",null,JSON.stringify(i.ATOMUSDT,null,2)))}},3510:(e,t,a)=>{a.d(t,{Z:()=>l});var n=a(272),r=a.n(n),s=a(2609),o=a.n(s)()(r());o.push([e.id,".GD1VOmHbAdLdAEhpcP76{position:relative}.VNsRXTEHw3fhxlCJ2JQJ{padding:0 1em}","",{version:3,sources:["webpack://./src/containers/Quote/Chart.module.scss"],names:[],mappings:"AAAA,sBACE,iBAAA,CAEF,sBACE,aAAA",sourcesContent:[".Chart {\n  position: relative;\n}\n.Button {\n  padding: 0 1em;\n}\n"],sourceRoot:""}]),o.locals={Chart:"GD1VOmHbAdLdAEhpcP76",Button:"VNsRXTEHw3fhxlCJ2JQJ"};const l=o},3045:(e,t,a)=>{a.d(t,{Z:()=>l});var n=a(272),r=a.n(n),s=a(2609),o=a.n(s)()(r());o.push([e.id,".nIFFESrZohc36HDUpxy2{color:blue}.nIFFESrZohc36HDUpxy2 h3 img{width:24px;height:24px}.nIFFESrZohc36HDUpxy2 h3 img+span{margin-left:1em}","",{version:3,sources:["webpack://./src/containers/Quote/styles.module.scss"],names:[],mappings:"AAAA,sBACE,UAAA,CAGE,6BACE,UAAA,CACA,WAAA,CACA,kCACE,eAAA",sourcesContent:[".Section {\n  color: blue;\n\n  h3 {\n    img {\n      width: 24px;\n      height: 24px;\n      & + span {\n        margin-left: 1em;\n      }\n    }\n  }\n}\n"],sourceRoot:""}]),o.locals={Section:"nIFFESrZohc36HDUpxy2"};const l=o}}]);
//# sourceMappingURL=7.js.map