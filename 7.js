"use strict";(self.webpackChunk_dev_web=self.webpackChunk_dev_web||[]).push([[7],{3007:(e,t,n)=>{n.r(t),n.d(t,{default:()=>L});var r=n(2784),s=n(1148),o=n(859),l=n(878),a=n(8871),i=n(357),c=n(4500),A=n(5120),u=n(2335),m=n(5909),d=n(2779),p=n.n(d),h=n(6062),b=n.n(h),f=n(4036),g=n.n(f),E=n(6793),C=n.n(E),y=n(7892),v=n.n(y),x=n(1173),w=n.n(x),Z=n(2464),S=n.n(Z),k=n(3510),O={};O.styleTagTransform=S(),O.setAttributes=v(),O.insert=C().bind(null,"head"),O.domAPI=g(),O.insertStyleElement=w(),b()(k.Z,O);const U=k.Z&&k.Z.locals?k.Z.locals:void 0,{width:D,height:B,left:T,right:Y,top:F,bottom:I}={width:320,height:200,left:10,right:10,top:20,bottom:20};function M({list:e}){const[t,n]=(0,r.useState)(null),o=(0,r.useRef)(null),l=(0,r.useRef)(null),a=(0,r.useRef)(null),i=(0,r.useMemo)((()=>new s.x),[]);return(0,r.useEffect)((()=>{const e=i.pipe((0,u.w)((e=>(0,A.of)(e).pipe((0,m.g)(e?0:800))))).subscribe((e=>n(e)));return()=>e.unsubscribe()}),[i]),(0,r.useEffect)((()=>{const t=e.map((e=>[new Date(e.price_timestamp),e.price,e.id])),n=t.map((([e=0])=>e)),r=t.map((([,e=0])=>e)),s=[Math.min(...n),Math.max(...n)],A=[Math.min(...r),Math.max(...r)],u=(0,c.BYU)().domain(s).range([T,D-Y]),m=(0,c.BYU)().domain(A).range([B-I,F]),d=(0,c.BYU)().domain(A).range(["red","blue"]);(0,c.Ys)(a.current).selectAll("circle").remove(),(0,c.Ys)(a.current).selectAll("circle").data(t).join((e=>e.append("circle").attr("cx",(([e=0])=>u(e))).attr("cy",(([,e=0])=>m(e))).attr("r",0).attr("fill",(([e=0])=>d(e))).on("mouseover",((e,[,,t])=>i.next({left:e.layerX,top:e.layerY,label:t}))).on("mouseout",(()=>i.next(null))).call((e=>e.transition().duration(200).attr("r",2).style("opacity",1)))),(e=>e.attr("fill","lightgrey")),(e=>e.attr("fill","tomato").call((e=>e.transition().duration(200).attr("r",0).style("opacity",0).remove()))));const p=(0,c.LLu)(u).ticks(5).tickSizeOuter(0).tickFormat((0,c.i$Z)("%Y-%m-%d, %H:%M:%S"));(0,c.Ys)(o.current).call(p).style("font-size","8px");const h=(0,c.y4O)(m).ticks(5).tickSizeOuter(0);(0,c.Ys)(l.current).call(h).style("font-size","8px")}),[e]),r.createElement("div",{className:p()(U.Chart)},r.createElement("svg",{ref:a,width:D,height:B,viewBox:`0, 0, ${D}, ${B}`},r.createElement("g",{transform:`translate(0, ${B-I})`,ref:o}),r.createElement("g",{transform:`translate(${T}, 0)`,ref:l})),t&&r.createElement("div",{className:U.Tooltip,style:{top:t.top,left:t.left}},t.label))}var H=n(3045),j={};j.styleTagTransform=S(),j.setAttributes=v(),j.insert=C().bind(null,"head"),j.domAPI=g(),j.insertStyleElement=w(),b()(H.Z,j);const $=H.Z&&H.Z.locals?H.Z.locals:void 0,_=(0,i.k)((async()=>{const e=await fetch("api/quote.json");return await e.json()}));function G({symbol:e,rates:t}){const[{logo_url:n}]=t;return r.createElement("div",null,r.createElement("h3",null,n&&r.createElement("img",{alt:e,src:n}),r.createElement("span",null,e)),r.createElement(M,{list:t}))}function L(){const{results:e}=_.read(),[t,n]=(0,r.useState)((()=>e)),i=(0,r.useMemo)((()=>new s.x),[]);(0,r.useEffect)((()=>{const e=i.pipe((0,l.z)((()=>(0,o.D)(fetch("api/rates.json").then((e=>e.json())).then((({data:e})=>{const t=e.reduce(((e,{rates:t,token:n})=>{return Object.assign(e,{[n]:(r=(new Date).toISOString(),s=`${n}USDT`,{id:`${s}@${r}`,price:t.USDT,price_timestamp:r,symbol:s})});var r,s}),{});n((e=>e.concat(t.ATOM)))}))))),(0,a.b)(15e3)).subscribe((e=>i.next({})));return()=>e.unsubscribe()}),[i]),(0,r.useEffect)((()=>{i.next({})}),[]);const c=(0,r.useMemo)((()=>t.reduce(((e,t)=>Object.assign(e,{[t.symbol]:(e[t.symbol]||[]).concat(t)})),{})),[t]);return console.log({list:c}),r.createElement("section",{className:$.Section},r.createElement("h2",null,"Quote"),Object.entries(c).map((([e,t])=>r.createElement(G,{key:e,symbol:e,rates:t}))),r.createElement("pre",null,JSON.stringify(c.ATOMUSDT,null,2)))}},3510:(e,t,n)=>{n.d(t,{Z:()=>a});var r=n(272),s=n.n(r),o=n(2609),l=n.n(o)()(s());l.push([e.id,".GD1VOmHbAdLdAEhpcP76{position:relative;border:2px solid red}.GD1VOmHbAdLdAEhpcP76 svg{width:100%;height:50vh}.GD1VOmHbAdLdAEhpcP76 .rUOrYdAmIEQZil4CemrZ{position:absolute}.rUOrYdAmIEQZil4CemrZ{background:#fff;border:1px solid #add8e6;color:orange;padding:.25em}","",{version:3,sources:["webpack://./src/containers/Quote/Chart.module.scss"],names:[],mappings:"AAAA,sBACE,iBAAA,CACA,oBAAA,CAEA,0BACE,UAAA,CACA,WAAA,CAEF,4CACE,iBAAA,CAGJ,sBACE,eAAA,CACA,wBAAA,CACA,YAAA,CACA,aAAA",sourcesContent:[".Chart {\n  position: relative;\n  border: 2px solid red;\n\n  svg {\n    width: 100%;\n    height: 50vh;\n  }\n  .Tooltip {\n    position: absolute;\n  }\n}\n.Tooltip {\n  background: white;\n  border: 1px solid lightblue;\n  color: orange;\n  padding: 0.25em;\n}\n"],sourceRoot:""}]),l.locals={Chart:"GD1VOmHbAdLdAEhpcP76",Tooltip:"rUOrYdAmIEQZil4CemrZ"};const a=l},3045:(e,t,n)=>{n.d(t,{Z:()=>a});var r=n(272),s=n.n(r),o=n(2609),l=n.n(o)()(s());l.push([e.id,".nIFFESrZohc36HDUpxy2{color:blue}.nIFFESrZohc36HDUpxy2 h3 img{width:24px;height:24px}.nIFFESrZohc36HDUpxy2 h3 img+span{margin-left:1em}","",{version:3,sources:["webpack://./src/containers/Quote/styles.module.scss"],names:[],mappings:"AAAA,sBACE,UAAA,CAGE,6BACE,UAAA,CACA,WAAA,CACA,kCACE,eAAA",sourcesContent:[".Section {\n  color: blue;\n\n  h3 {\n    img {\n      width: 24px;\n      height: 24px;\n      & + span {\n        margin-left: 1em;\n      }\n    }\n  }\n}\n"],sourceRoot:""}]),l.locals={Section:"nIFFESrZohc36HDUpxy2"};const a=l}}]);
//# sourceMappingURL=7.js.map